<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Superwhisper ショートカット動作テスト</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 40px;
            max-width: 800px;
            margin: 0 auto;
            background: #f5f5f7;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            margin-bottom: 30px;
        }
        
        .test-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }
        
        .test-btn {
            display: inline-block;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            text-decoration: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-weight: 600;
            margin: 10px 10px 10px 0;
            transition: transform 0.2s ease;
        }
        
        .test-btn:hover {
            transform: translateY(-2px);
        }
        
        .test-btn.record {
            background: linear-gradient(135deg, #ff9500 0%, #ff6200 100%);
        }
        
        .code-block {
            background: #1e1e1e;
            color: #fff;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: 'Monaco', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        
        .status {
            background: #e8f5e8;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .manual-section {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }
        
        .step {
            margin: 10px 0;
            display: flex;
            align-items: start;
        }
        
        .step-number {
            background: #007AFF;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            flex-shrink: 0;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎤 Superwhisper ショートカット動作テスト</h1>
        
        <div class="test-section">
            <h2>1. Deep Link 直接テスト</h2>
            <p>以下のボタンをクリックして、Superwhisperが正しく起動するか確認してください：</p>
            
            <a href="superwhisper://mode?key=test-mode" class="test-btn">
                📱 テストモードを開く
            </a>
            
            <a href="superwhisper://record" class="test-btn record">
                🎙️ 録音を開始
            </a>
            
            <div class="code-block">
                Deep Link: superwhisper://mode?key=test-mode<br>
                Record Link: superwhisper://record
            </div>
        </div>
        
        <div class="test-section">
            <h2>2. ショートカットインポートテスト</h2>
            <p>以下の方法でショートカットをインポートしてみてください：</p>
            
            <h3>方法A: URLスキーム（推奨）</h3>
            <a href="shortcuts://create-shortcut" class="test-btn">
                🚀 新規ショートカット作成画面を開く
            </a>
            
            <h3>方法B: 手動インポート</h3>
            <div class="manual-section">
                <div class="step">
                    <div class="step-number">1</div>
                    <div>Shortcuts.app を開く</div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div>右上の「+」をクリック</div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div>「Add Action」をクリック</div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div>「Open URL」を検索して選択</div>
                </div>
                <div class="step">
                    <div class="step-number">5</div>
                    <div>URL欄に <code>superwhisper://mode?key=test-mode</code> を入力</div>
                </div>
                <div class="step">
                    <div class="step-number">6</div>
                    <div>ショートカット名を「テストモード」に設定</div>
                </div>
                <div class="step">
                    <div class="step-number">7</div>
                    <div>「Done」をクリック</div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>3. ショートカットファイルテスト</h2>
            <p>生成されたショートカットファイルを確認：</p>
            
            <div class="code-block" id="fileList">
                読み込み中...
            </div>
            
            <button onclick="openShortcutFile()" class="test-btn">
                📂 ショートカットファイルを開く
            </button>
        </div>
        
        <div class="status">
            <h3>✅ 動作確認チェックリスト</h3>
            <ul>
                <li>□ Deep Linkでテストモードが開いた</li>
                <li>□ 録音が開始された</li>
                <li>□ ショートカットを手動作成できた</li>
                <li>□ 作成したショートカットが動作した</li>
            </ul>
        </div>
    </div>
    
    <script>
        // ファイルリストを表示
        document.addEventListener('DOMContentLoaded', () => {
            const fileList = document.getElementById('fileList');
            fileList.innerHTML = `
生成されたファイル:<br>
- /Users/mashimaro/Documents/Workspace/Superwhispershortcut/macos-shortcuts/テストモード.shortcut<br>
<br>
ファイルサイズ、形式などを確認してください。
            `;
        });
        
        // ショートカットファイルを開く
        function openShortcutFile() {
            // Finderで開く処理（実際にはJavaScriptからは制限あり）
            alert('Finderで以下のパスを開いてください:\n/Users/mashimaro/Documents/Workspace/Superwhispershortcut/macos-shortcuts/');
        }
        
        // Deep Link動作確認
        document.querySelectorAll('.test-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                console.log('Attempting to open:', e.target.href);
                // 5秒後にフィードバックを求める
                setTimeout(() => {
                    if (confirm('Superwhisperは正しく開きましたか？')) {
                        console.log('✅ Deep Link動作確認OK');
                    } else {
                        console.log('❌ Deep Link動作確認NG - 手動設定をお試しください');
                    }
                }, 5000);
            });
        });
    </script>
</body>
</html>